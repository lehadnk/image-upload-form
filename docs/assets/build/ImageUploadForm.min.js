!function(e){function r(r,a,n){var o=e(t(r));e.fn.imageUploadForm.renderError(o,a,n)}function a(){var a=new FormData;a.append("file",e(this)[0].files[0]),a.append("action","upload");var n=e(this).data("url"),i=s(t(this),.4);m(i),e.ajax({url:n,type:"POST",data:a,processData:!1,contentType:!1,dataType:"json",success:function(e){e.src&&e.id&&e.status||(e.error?r(i,"Error!",e.error):r(i,"Error!","It looks like there's something wrong with server response. Please notice server administrator about it."),o(i)),u(i),l(i,f(e)),d(i),i.fadeTo("slow",1)},error:function(){r(i,"Error!","Internal server error."),o(i)},timeout:15e3})}function n(){var a=e(e(this).parents("."+v.thumbContainer)[0]).find("img").data("id"),n=e(this).data("url"),t=e(this).parent();m(t.parent()),e.ajax({url:n,type:"POST",data:{action:"delete",id:a},dataType:"json",success:function(a){u(t.parent()),a.error&&r(t,"Error!",a.error),a.status&&o(e(t).parents("."+v.thumbContainer))},error:function(){u(t),r(t,"Error!","Internal server error.")},timeout:15e3})}function o(r){e(r).hide("fade",function(){var a=r.parent();e(r).remove(),d(a)})}function t(r){return e(e(r).parents("."+v.pluginContainer)[0]).find("."+v.imageContainerClass)[0]}function i(r){var a=e(r).children("img");return a.each(function(r,a){e(a).hide()}),a}function d(r){var a=e(e(r).parents("."+v.pluginContainer)[0]).find("."+v.footerHintClass)[0],n=e(t(r)).children("."+v.thumbContainer).length;e(a).html(n+" images total")}function s(r,a){e(r).parent().show();var n=e(r).children("."+v.imagePatternClass).clone(!0);return n.appendTo(r),n.removeClass(v.imagePatternClass).hide(),a?n.fadeTo("slow",a):n.fadeIn("slow"),n.addClass(v.thumbContainer),n}function l(r,a){e(a).appendTo(e(r).children("."+v.imageThumbContainer)[0]),e(a).fadeIn("slow")}function m(r){r.addClass("iuf-has-overlay"),e.fn.imageUploadForm.addLoadingOverlay(r)}function u(r){r.removeClass("iuf-has-overlay"),e(r).children("."+e.fn.imageUploadForm.serviceVars.overlay).remove()}function f(r){return e("<img>").attr("src",r.src).data("id",r.id).addClass(v.thumb).hide()}function c(r,a){var n=e.fn.imageUploadForm.serviceVars,o=e.fn.imageUploadForm.createThumbnail;a.each(function(a,t){e(t).addClass(n.thumb),o(r,t)})}function p(r,o){var s=i(r),l=o.style;e.fn.imageUploadForm.renderHeader(r,o,a);var m=e.fn.imageUploadForm.renderBody(r,o,n);if(0==s.length)e(m).hide();else{var u=t(m);c(u,s,o,l)}var f=e.fn.imageUploadForm.renderFooter(r,o);d(f)}function g(r,a){e(r).addClass(v.pluginContainer).addClass(a.style.container),p(r,a)}function h(){console.error("ImageUploadForm: no renderer set. Please set up the plugin referring to official documentation: https://github.com/lehadnk/image-upload-form#renderers")}e.fn.imageUploadForm=function(r){var a=e.extend({maxFiles:7,style:e.fn.imageUploadForm.getStyles(),text:{formHeader:"Image Upload",deleteButton:"Delete"},uploadUrl:"",deleteUrl:""},r);g(this,a)},e.fn.imageUploadForm.serviceVars={imageContainerClass:"iuf-image-container",footerHintClass:"iuf-footer-hint",imagePatternClass:"iuf-image-pattern",imageThumbContainer:"iuf-image-thumb-container",pluginContainer:"iuf-plugin-container",overlay:"iuf-overlay",thumbContainer:"iuf-thumb-container",thumb:"iuf-thumb-image"};var v=e.fn.imageUploadForm.serviceVars;e.fn.imageUploadForm.createThumbnail=function(e,r){var a=s(e);l(a,r)},e.fn.imageUploadForm.getStyles=h,e.fn.imageUploadForm.renderHeader=h,e.fn.imageUploadForm.renderBody=h,e.fn.imageUploadForm.renderFooter=h,e.fn.imageUploadForm.renderError=h,e.fn.imageUploadForm.addLoadingOverlay=h}(jQuery);